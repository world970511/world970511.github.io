<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Djangoì— Celery ì‚¬ìš©í•˜ê¸°(3) - ë°•ë‚˜ì€</title>
    <meta name="description" content="íšŒì‚¬ì—ì„œ ì§„í–‰í–ˆë˜ ì¼ë“¤ ì •ë¦¬(2): Celeryì—ì„œì˜ ì‘ì—… í˜¸ì¶œ">
    <meta name="google-site-verification" content="lb30pDDWow-sRJaP0kOtYGGmFU5NTD9i_hNGZIeWHlM" />
    <meta property="og:title" content="Djangoì— Celery ì‚¬ìš©í•˜ê¸°(3)">
    <meta property="og:description" content="íšŒì‚¬ì—ì„œ ì§„í–‰í–ˆë˜ ì¼ë“¤ ì •ë¦¬(2): Celeryì—ì„œì˜ ì‘ì—… í˜¸ì¶œ">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../../images/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="../../images/favicon/favicon.svg" />
    <link rel="shortcut icon" href="../../images/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="../../images/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="../../images/favicon/site.webmanifest" />
    
    <link rel="stylesheet" href="../../assets/css/styles.css">
    <link rel="stylesheet" href="../../assets/css/blog-post.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
</head>
<body>
    <nav class="nav-container">
        <div class="nav-content">
            <a class="nav-brand" href="../../index.html">ë°•ë‚˜ì€</a>
            <div class="nav-tabs">
                <a class="nav-tab" href="../blog-index.html">Blog</a>
            </div>
        </div>
    </nav>
    
    <div class="main-container">
        <article class="blog-post-full">
            <header class="post-header">
                <h1 class="post-title">Djangoì— Celery ì‚¬ìš©í•˜ê¸°(3)</h1>
                <div class="post-meta">
                    <span>ğŸ“… 2025ë…„ 12ì›” 29ì¼</span>
                    <span>â±ï¸ 5ë¶„ ì½ê¸°</span>
                    <span>ğŸ“ Tech</span>
                </div>
                <div class="post-tags">
                    <span class="post-tag">#python</span><span class="post-tag">#Celery</span>
                </div>
            </header>
            <div class="post-content">
                <h1 id="íšŒì‚¬ì—ì„œ-ì§„í–‰í–ˆë˜-ì¼ë“¤-ì •ë¦¬2">íšŒì‚¬ì—ì„œ ì§„í–‰í–ˆë˜ ì¼ë“¤ ì •ë¦¬(2)</h1>
<p>ì €ë²ˆì— ì“´ <a href="https://world970511.github.io/blog/posts/2025-11-09-2-2.html">Celeryë¥¼ Djangoì— ì ìš©í•˜ê¸°</a>ì— ì´ì–´
Celeryì—ì„œ ì‘ì—… í˜¸ì¶œ ë°©ë²•ì„ ê³µì‹ë¬¸ì„œì˜<a href="https://docs.celeryq.dev/en/stable/userguide/calling.html">Calling Tasks</a>ì™€ ê°œì¸ ê²½í—˜ìœ¼ë¡œ ì •ë¦¬í•´ë³´ì•˜ë‹¤.
ì›ë˜ëŠ”  ì „ í¸ì—ì„œ ê°„ë‹¨íˆ ì†Œê°œí•œ ë§Œí¼ ë°”ë¡œ ì›Œí¬í”Œë¡œìš° ì‘ì„±ë²•ì„ ì •ë¦¬í•˜ë ¤ê³  í–ˆëŠ”ë°.... í˜¸ì¶œ ë°©ë²•ë¶€í„° ì •ë¦¬í•˜ê³  ì‹œì‘í•˜ëŠ” ê²Œ ë” ì¢‹ì„ ê²ƒ ê°™ì•„ì„œ í˜¸ì¶œë¶€ë¶„ì„ ì„¸ì„¸í•˜ê²Œ ì‘ì„±í•´ë³´ì•˜ë‹¤.<br>Celery-beat ì‚¬ìš©(+Periodic Tasks)ê¹Œì§€ëŠ” ì •ë¦¬í•´ë³¼ ê²ƒ ê°™ë‹¤.<br>Celery 5.6 ê¸°ë°˜ìœ¼ë¡œ ì„¤ëª…í•  ìƒê°ì´ë¼ ë²„ì „ì— ë§ì¶°ì„œ ì°¸ê³ .  </p>
<h4 id="ğŸ“-ì™œ-ì‚¬ìš©í–ˆì§€">ğŸ“ ì™œ ì‚¬ìš©í–ˆì§€?</h4>
<p>ì¼ë‹¨ Celeryë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ” ì‚¬ìš©ì í¸ì˜ì„±ì„ ìœ„í•´ì„œì˜€ë‹¤.<br>íšŒì‚¬ì—ì„œ ê¸°ë³¸ 200kbì—ì„œ 10mb ì •ë„ì˜ ì´ë¯¸ì§€ íŒŒì¼ì„ 100ê°œì—ì„œ 1000ê°œì”© ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤ë³´ë‹ˆ ë‹¹ì—°íˆ ì‹œê°„ì´ ë§ì´ ê±¸ë ¸ê³ , ì‚¬ìš©ì í¸ì˜ì„±ì„ ìƒê°í•´ë³´ë©´ ë¬´ì¡°ê±´ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•´ì•¼ í–ˆì–´ì„œ....<br>ì›ë˜ëŠ” Celeryë¥¼ ì•ˆ ì“°ê³  í•´ê²° ê°€ëŠ¥í•˜ì§€ ì•Šì„ê¹Œ...? ë¼ê³  ìƒê°í–ˆì§€ë§Œ ê²°ë¡ ì€ ì—…ë¡œë“œ/ì„ì‹œì‚­ì œ/ì˜êµ¬ì‚­ì œ/ë³€ê²½/ë³µì‚¬/ì´ë™ ë“±ë“± ëŒ€ë¶€ë¶„ì˜ ì‘ì—…ì„ Celeryë¡œ ì²˜ë¦¬í•´ì•¼ í–ˆë‹¤.ì¼€ì´ìŠ¤ ê°€ì •í•´ë³´ë‹ˆê¹Œ 100000ê°œ ì´ìƒì˜ ì´ë¯¸ì§€ íŒŒì¼ì´ ì™”ë‹¤ê°”ë‹¤ í•˜ëŠ” ê²½ìš°ë„ ë§ì€ë° ì–´ì©” ìˆ˜ ì—†ê² ë”ë¼ê³ .<br>ë‚˜ì¤‘ì— ë¹„ë™ê¸° ì²˜ë¦¬ì— íë¥¼ ì¶”ê°€í•˜ê³ , ì²­í¬ë¡œ ë°ì´í„° ë¶„í•  í›„ ë°°ì¹˜ ì²˜ë¦¬í•˜ëŠ” ê²ƒê¹Œì§€ ì¶”ê°€í•´ì•¼ í–ˆëŠ”ë° ì‹¤ì œë¡œ í…ŒìŠ¤íŠ¸ ëŒë¦´ ë•Œ 10mb ì´ìƒ ë°ì´í„°ë¥¼ 100ê°œ ì´ìƒ í•œë²ˆì— ì—…ë¡œë“œí•œë‹¤ë“ ê°€ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œì™€ ëŒ€ëŸ‰ íŒŒì¼ ì—…ë¡œë“œê°€ ì¶©ëŒë‚  ê²½ìš° ë“± ì´ëŸ° ìƒí™©ì—ì„œ ì˜¤ë¥˜ê°€ ë‚˜ì„œ....</p>
<h2 id="âœ…-apply_async-vs-delay">âœ… apply_async VS delay</h2>
<p>ê³µì‹ ë¬¸ì„œì—ì„œëŠ” í˜¸ì¶œ ë°©ë²•ì„ í¬ê²Œ 3ê°€ì§€ë¡œ ì†Œê°œí•œë‹¤.</p>
<ul>
<li><p>apply_async(args[, kwargs[, â€¦]])</p>
</li>
<li><p>delay(*args, **kwargs)</p>
</li>
<li><p>calling (<strong>call</strong>)</p>
</li>
</ul>
<p>ê·¼ë° ì‚¬ì‹¤ ë§ˆì§€ë§‰ ê±´ ê±°ì˜ ì‚¬ìš©ì„ ì•ˆí•œ ê²ƒ ê°™ë‹¤. ê¸°ê»í•´ì•¼ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•´ì•¼ í• ë•Œ?<br>ê·¸ë˜ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•œ ê±´ <code>apply_async</code>ì™€ <code>delay</code>ì¸ë° ë‘˜ì´ ê¸°ëŠ¥ ìì²´ëŠ” ë¹„ìŠ·ë¹„ìŠ· í•˜ë‹¤ ë³´ë‹ˆ ì²˜ìŒì— ë‘˜ì˜ ì°¨ì´ì ì„ ëª°ë¼ &quot;...????&quot; ì´ ìƒíƒœë¡œ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤.<br>ê°„ë‹¨íˆ ë‘˜ì˜ ì°¨ì´ì ì„ ì •ë¦¬í•´ë³´ë©´ ë°‘ê³¼ ê°™ë‹¤.</p>
<ul>
<li><p><strong>apply_async(args[, kwargs[, ...]])</strong> : ë¹„ë™ê¸° ì‹¤í–‰ ì‹œ <strong>ìƒì„¸ ì œì–´</strong>ê°€ í•„ìš”í•  ë•Œ ì‚¬ìš©. ì‹¤í–‰ íƒ€ì´ë°(countdown), ì‘ì—… ë§Œë£Œ ì‹œê°„, íŠ¹ì • í(Queue) ì§€ì •, ìš°ì„ ìˆœìœ„(Priority) ë“±ì„ ì„¤ì •í•´ ë¸Œë¡œì»¤ì— ì „ë‹¬í•œë‹¤. ì‘ì—… ê°„ ê°„ì„­ì„ ë°©ì§€í•˜ê±°ë‚˜ ë¦¬ì†ŒìŠ¤ ë¶„ë°°ê°€ í•„ìš”í•œ ë³µì¡í•œ ì‹œìŠ¤í…œì—ì„œ ì£¼ë¡œ í™œìš©í•œë‹¤.</p>
</li>
<li><p><strong>delay(args, kwargs)</strong> : <strong>apply_asyncì˜ ë‹¨ì¶•í˜•(Shortcut)</strong>. ë³„ë„ì˜ ì˜µì…˜ ì—†ì´ ì¸ìê°’ë§Œ ë„˜ê²¨ ì¦‰ì‹œ ë¹„ë™ê¸°ë¡œ ì‹¤í–‰í•œë‹¤. ë‹¨ìˆœí•˜ê³  ë°˜ë³µì ì¸ ì‘ì—…ì„ ë¹ ë¥´ê²Œ ë˜ì§ˆ ë•Œ ìœ ë¦¬í•˜ë‹¤.</p>
</li>
</ul>
<p>ë‹¨ìˆœ ì‹¤í–‰ë³´ë‹¤ ì‘ì—…ì˜ ìš°ì„ ìˆœìœ„ ì œì–´ë‚˜ ì „ìš© íë¥¼ í†µí•œ ì›Œì»¤ ë¶„ë¦¬ê°€ ì¤‘ìš”í•œ í™˜ê²½ì—ì„œëŠ”(í´ë” êµ¬ì¡°ëŒ€ë¡œ í´ë” ì—…ë¡œë“œ ë“±) delayë³´ë‹¤ apply_asyncë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ í™•ì¥ì„±ê³¼ ì•ˆì •ì„± ë©´ì—ì„œ ìœ ë¦¬í•˜ë‹¤. </p>
<h4 id="1ï¸âƒ£-apply_async">1ï¸âƒ£ apply_async</h4>
<p>ì‚¬ì‹¤ ë‘˜ ë‹¤ ì‚¬ìš©ë²•ì´ ë¹„ìŠ·í•œë°, ì´ì „ì— ì‘ì—…í•œ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì„œ ì˜ˆì‹œë¡œ ë³´ë©´ì„œ ì„¤ëª…í•˜ê² ë‹¤.<br>ì¼ë‹¨ í˜¸ì¶œ ë°©ë²•ì€ ë‘˜ë‹¤ ë¹„ìŠ·í•˜ë‹¤. taskë¥¼ view í˜¹ì€ ë‹¤ë¥¸ taskì—ì„œ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•˜ë©´ ëœë‹¤. 
apply_asyncë¶€í„° ì„¤ëª…í•´ë³´ê² ë‹¤. ì˜ˆì‹œ ì½”ë“œë¥¼ ë³´ì.  </p>
<pre><code class="language-python">    from ..tasks import test

    @action(detail=True, methods=[&#39;post&#39;])
    def test(self, request, pk=None):
        # ì‚­ì œëœ ìƒíƒœì´ê±°ë‚˜, ê°ì²´ê°€ ì—†ì„ ê²½ìš° 404 ì—ëŸ¬ë¥¼ ë°˜í™˜í•˜ê³  ì•„ë‹ ê²½ìš° ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
        file = get_object_or_404(File.objects.filter(is_deleted=True), pk=pk)

        # uploaderê°€ ì—†ëŠ” ê²½ìš° í˜„ì¬ ìš”ì²­ ì‚¬ìš©ì ID ì‚¬ìš©
        user_id = file.uploader.id if file.uploader else request.user.id

        #test task í˜¸ì¶œ
        test.apply_async(
            kwargs={
                &#39;file_id&#39;: file.id, # íŒŒì¼id
                &#39;user_id&#39;: user_id, # ì‚¬ìš©ìid
            },
            queue=&#39;test&#39;# test íì— ì „ë‹¬
        )
        serializer = FileSerializer(file)
        return Response(serializer.data)
</code></pre>
<p>ì´ë ‡ê²Œ í•˜ë©´ íŒŒì¼ ì—…ë¡œë“œ í›„ ë°”ë¡œ test taskê°€ ì‹¤í–‰ëœë‹¤. ì´ë•Œ apply_asyncë§Œ ì‚´í´ë³´ë©´ ë°‘ê³¼ ê°™ë‹¤.</p>
<pre><code class="language-python">    #test task í˜¸ì¶œ
    test.apply_async(
        #kwargsë¥¼ í†µí•´ ì¸ì ì „ë‹¬.
        kwargs={
            &#39;file_id&#39;: file.id, # íŒŒì¼id
            &#39;user_id&#39;: user_id, # ì‚¬ìš©ìid
        },
        #queueë¥¼ í†µí•´ íŠ¹ì • íì— ì „ë‹¬.
        queue=&#39;test&#39;
    )
</code></pre>
<p>ì—¬ê¸°ì„œëŠ” kwargsë¥¼ í†µí•´ ì¸ìë¥¼ ì „ë‹¬í•˜ê³  queueë¥¼ í†µí•´ íŠ¹ì • íì— ì „ë‹¬í•œë‹¤. ì—¬ê¸°ì„œëŠ” queue ì˜µì…˜ë§Œ ì‚¬ìš©í–ˆëŠ”ë°, ì´ ì™¸ì˜ ë‹¤ë¥¸ ì˜µì…˜ì€ ë°‘ê³¼ ê°™ë‹¤.</p>
<details>
<summary>apply_async ì˜µì…˜</summary>

<pre><code>1.ì‹œê°„ ì œì–´ ì˜µì…˜ (Scheduling): ì‘ì—…ì„ ì¦‰ì‹œ ì‹¤í–‰í•˜ì§€ ì•Šê³  íŠ¹ì • ì‹œì ì— ì‹¤í–‰í•˜ë„ë¡ ì œì–´.

countdown: í˜„ì¬ ì‹œì ë¶€í„° ëª‡ ì´ˆ í›„ì— ì‹¤í–‰í• ì§€ ì„¤ì •.
(ex)add.apply_async(args=[1, 2], countdown=60) # 1ë¶„ ë’¤ ì‹¤í–‰

eta (Estimated Time of Arrival): íŠ¹ì • ì‹œê°(datetime)ì— ì‹¤í–‰ë˜ë„ë¡ ì˜ˆì•½.
(ex)add.apply_async(args=[1, 2], eta=now + timedelta(hours=1)) # 1ì‹œê°„ ë’¤ ì •ê° ì‹¤í–‰

expires: ì‘ì—…ì˜ ìœ íš¨ ê¸°ê°„ì„ ì„¤ì •. ì„¤ì •ëœ ì‹œê°„ì´ ì§€ë‚˜ë„ë¡ ì›Œì»¤ê°€ ì‘ì—…ì„ ì‹œì‘í•˜ì§€ ëª»í–ˆë‹¤ë©´ í•´ë‹¹ ì‘ì—…ì€ ì·¨ì†Œ(Revoke)ë©ë‹ˆë‹¤.
(ex)add.apply_async(args=[1, 2], expires=now + timedelta(hours=1)) # 1ì‹œê°„ í›„ì—ë§Œ ì‹¤í–‰


2.ë¼ìš°íŒ… ë° ìš°ì„ ìˆœìœ„ (Routing &amp; Priority): ì‘ì—…ì´ ì „ë‹¬ë  ê²½ë¡œì™€ ì¤‘ìš”ë„ë¥¼ ê²°ì •.

queue: ì‘ì—…ì„ ë³´ë‚¼ ì „ìš© íì˜ ì´ë¦„ì„ ì§€ì •.
(ex)upload_task.apply_async(args=[file], queue=&#39;heavy_tasks&#39;)

priority: í ë‚´ì—ì„œì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì§€ì •. (ì¼ë°˜ì ìœ¼ë¡œ 0~9 ì‚¬ì´ì˜ ì •ìˆ˜ ì‚¬ìš©)
(ex)upload_task.apply_async(args=[file], priority=5)
+ ìˆ«ìê°€ ë†’ì„ìˆ˜ë¡ ë¨¼ì € ì²˜ë¦¬
+ ì‚¬ìš©í•˜ëŠ” ë¸Œë¡œì»¤(Redis, RabbitMQ)ì˜ ì„¤ì •ì— ë”°ë¼ ë™ì‘ ë°©ì‹ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ

routing_key: AMQP(RabbitMQ ë“±) í™˜ê²½ì—ì„œ ë©”ì‹œì§€ë¥¼ ë” ì„¸ë°€í•˜ê²Œ ë¼ìš°íŒ…í•  ë•Œ ì‚¬ìš©
(ex)upload_task.apply_async(args=[file], routing_key=&#39;heavy_tasks&#39;)


3.ì¬ì‹œë„ ë° ì˜¤ë¥˜ ê´€ë¦¬ (Retries &amp; Reliability): ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì •ì´ë‚˜ ì™¸ë¶€ API ì¥ì• ì— ëŒ€ë¹„í•˜ëŠ” ì˜µì…˜.

retry: ì‘ì—… ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„ ì—¬ë¶€ë¥¼ ì„¤ì •
(ex)upload_task.apply_async(args=[file], retry=True)
+ True/False

retry_policy: ì¬ì‹œë„ íšŸìˆ˜, ì§€ì—° ì‹œê°„ ë“±ì„ ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ ìƒì„¸ ì„¤ì •
(ex)upload_task.apply_async(args=[file], retry_policy={
        &#39;max_retries&#39;: 3,         # ìµœëŒ€ 3ë²ˆ ì‹œë„
        &#39;interval_start&#39;: 0,      # ì²« ì¬ì‹œë„ ëŒ€ê¸° ì‹œê°„
        &#39;interval_step&#39;: 0.2,     # ì¬ì‹œë„ë§ˆë‹¤ ëŠ˜ì–´ë‚  ì‹œê°„
        &#39;interval_max&#39;: 0.5,      # ìµœëŒ€ ëŒ€ê¸° ì‹œê°„
    })


4. ì‘ì—… ì—°ê²° ë° ì½œë°± (Workflow/Chaining): ì‘ì—… ì™„ë£Œ í›„ì˜ í›„ì† ì¡°ì¹˜ë¥¼ ì„¤ì •.

link (Success Callback): ì‘ì—…ì´ ì„±ê³µí–ˆì„ ë•Œ ì‹¤í–‰í•  ë‹¤ìŒ ì‘ì—…ì„ ì§€ì •
(ex)upload_task.apply_async(args=[file], link=process_file.s())
+ ì•„ë§ˆ ì›Œí¬í”Œë¡œìš° ì„¤ëª…í• ë•Œ ê°€ì¥ ë§ì´ ë‚˜ì˜¬ ê²ƒ ê°™ë‹¤. 

link_error (Error Callback): ì‘ì—…ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ì‹¤í–‰í•  ì˜¤ë¥˜ ì²˜ë¦¬ ì‘ì—…ì„ ì§€ì •
(ex)upload_task.apply_async(args=[file], link_error=send_alert.s())
</code></pre>
</details>
<br/>

<h4 id="2ï¸âƒ£-delay-ì‚¬ìš©ë²•">2ï¸âƒ£ delay ì‚¬ìš©ë²•</h4>
<p>ì´ë²ˆì—ëŠ” delayë¥¼ ì‚¬ìš©í•´ë³´ê² ë‹¤.<br>delayëŠ” apply_asyncì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, ì„¸ë¶€ì ì¸ ì˜µì…˜ì„ ë‹¤ë£° ìˆ˜ ì—†ë‹¤.<br>ê³µì‹ë¬¸ì„œì—ì„œëŠ” ë°‘ê³¼ ê°™ì´ ë‚˜ì™€ ìˆë‹¤.</p>
<pre><code class="language-python">    task.delay(arg1, arg2, kwarg1=&#39;x&#39;, kwarg2=&#39;y&#39;)
</code></pre>
<p>ë‚˜ëŠ” ë°‘ê³¼ ê°™ì´ í™œìš©í–ˆë‹¤.</p>
<pre><code class="language-python">    def post(self, request):
        &quot;&quot;&quot;ì¼ê´„ ì‘ì—… ìš”ì²­&quot;&quot;&quot;
        try:
            file_ids = request.data.get(&#39;file_ids&#39;, [])
            
            if not file_ids:
                return Response(
                    {&quot;error&quot;: &quot;file_idsê°€ í•„ìš”í•©ë‹ˆë‹¤&quot;},
                    status=status.HTTP_400_BAD_REQUEST
                )
            
            # ìœ íš¨í•œ íŒŒì¼ë§Œ í•„í„°ë§ -- ì´ë¯¸ì§€ì¸ íŒŒì¼ë§Œ í•„í„°ë§
            valid_files = File.objects.filter(
                id__in=file_ids,
                file_type=&#39;img&#39;
            ).values_list(&#39;id&#39;, flat=True)
            
            valid_file_ids = [str(fid) for fid in valid_files]
            
            if not valid_file_ids:
                return Response(
                    {&quot;error&quot;: &quot;ìœ íš¨í•œ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤&quot;},
                    status=status.HTTP_400_BAD_REQUEST
                )
            
            # ë¹„ë™ê¸° ì‘ì—… ì‹¤í–‰
            from app.tasks.maintenance.test_tasks import generate_test_batch
            task = generate_test_batch.delay(valid_file_ids)
            
            return Response({
                &#39;task_id&#39;: task.id,
                &#39;message&#39;: &#39;testê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.&#39;,
                &#39;file_count&#39;: len(valid_file_ids)
            }, status=status.HTTP_202_ACCEPTED)
            
        except Exception as e:
            logger.error(f&quot;test ì˜¤ë¥˜: {str(e)}&quot;)
            return Response(
                {&quot;error&quot;: &quot;ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤&quot;},
                status=status.HTTP_500_INTERNAL_SERVER_ERROR
            )
</code></pre>
<p>ì¼ê´„ì ìœ¼ë¡œ ì¸ë„¤ì¼ ì´ë¯¸ì§€ ìƒì„±/ì´ë¦„ ë³€ê²½ ë“±ì˜ ì‘ì—…ì„ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©í•œ ë°©ë²•ì´ë‹¤.<br>apply_asyncì™€ ë‹¬ë¦¬ ì„¤ì •ë³´ë‹¤ ì‹¤í–‰ì´ ìš°ì„ ì¸ ì‘ì—…ì„ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©í–ˆë‹¤.</p>

            </div>
            <footer class="post-footer">
                <div class="post-navigation">
                    <a href="../blog-index.html" class="back-to-blog">â† ë¸”ë¡œê·¸ë¡œ ëŒì•„ê°€ê¸°</a>
                </div>
            </footer>
        </article>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <!-- Mermaid ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        // Mermaid ì´ˆê¸°í™” ë° ë Œë”ë§
        mermaid.initialize({ 
            startOnLoad: false,
            theme: 'default',
            securityLevel: 'loose'
        });
        
        // í˜ì´ì§€ ë¡œë“œ í›„ ì‹¤í–‰
        window.addEventListener('DOMContentLoaded', function() {
            // language-mermaid í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ì½”ë“œ ë¸”ë¡ ì°¾ê¸°
            document.querySelectorAll('pre code.language-mermaid').forEach(function(codeElement) {
                const pre = codeElement.parentElement;
                const mermaidCode = codeElement.textContent;
                
                // ìƒˆë¡œìš´ mermaid div ìƒì„±
                const mermaidDiv = document.createElement('div');
                mermaidDiv.className = 'mermaid';
                mermaidDiv.textContent = mermaidCode;
                
                // pre íƒœê·¸ë¥¼ mermaid divë¡œ êµì²´
                pre.parentNode.replaceChild(mermaidDiv, pre);
            });
            
            // Mermaid ë Œë”ë§
            mermaid.init(undefined, document.querySelectorAll('.mermaid'));
        });
    </script>
</body>
</html>